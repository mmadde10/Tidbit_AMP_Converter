{"version":3,"sources":["../src/style.js"],"names":["removeDisallowedStyles","validateStyle","removeExternalStyles","cheerio","main","styleRules","require","$","children","each","remove","removeAttr","style","find","css","html","ampStyle","replaceWith","fonts","externalStylesheet","attrs","value","index","element","attr","undefined"],"mappings":"AAAA;;;;;QAMgBA,sB,GAAAA,sB;QAOAC,a,GAAAA,a;QAMAC,oB,GAAAA,oB;;AAlBhB;;IAAYC,O;;AACZ;;IAAYC,I;;;;AACZ,IAAMC,aAAaC,QAAQ,uBAAR,CAAnB;;AAGO,SAASN,sBAAT,CAAgCO,CAAhC,EAAkC;AACrCA,MAAE,MAAF,EAAUC,QAAV,CAAmB,OAAnB,EAA4BC,IAA5B,CAAiC,YAAU;AACvCF,UAAE,IAAF,EAAQG,MAAR;AACH,KAFD;AAGAH,MAAE,WAAF,EAAeI,UAAf,CAA0B,OAA1B;AACAJ,MAAE,UAAF,EAAcI,UAAd,CAAyB,MAAzB;AACH;AACM,SAASV,aAAT,CAAuBM,CAAvB,EAAyB;AAC5B,QAAIK,QAAQL,EAAE,MAAF,EAAUM,IAAV,CAAe,8BAAf,CAAZ;AACA,QAAIC,MAAMP,EAAEK,KAAF,EAASG,IAAT,EAAV;AACA,QAAIC,kCAAgCF,GAAhC,aAAJ;AACAP,MAAEK,KAAF,EAASK,WAAT,CAAqBD,QAArB;AACH;AACM,SAASd,oBAAT,CAA8BK,CAA9B,EAAgC;AACnC,QAAIW,QAAQb,WAAWc,kBAAX,CAA8BC,KAA9B,CAAoCC,KAAhD;AACAd,MAAE,wBAAF,EAA4BE,IAA5B,CAAiC,UAASa,KAAT,EAAgBC,OAAhB,EAAwB;AACrD,aAAI,IAAIF,KAAR,IAAiBH,KAAjB,EAAuB;AACnB,gBAAGX,EAAE,IAAF,EAAQiB,IAAR,YAAsBN,MAAMG,KAAN,CAAtB,YAA2CI,SAA9C,EAAwD;AACpD,uBAAO,IAAP;AACH;AACJ;AACDlB,UAAE,IAAF,EAAQG,MAAR;AACH,KAPD;AAQH","file":"style.js","sourcesContent":["'use strict';\nimport * as cheerio from 'cheerio';\nimport * as main from '../index';\nconst styleRules = require('./ampRules/styleRules');\n\n\nexport function removeDisallowedStyles($){\n    $('body').children('style').each(function(){\n        $(this).remove();\n    });\n    $(\"* [style]\").removeAttr(\"style\");\n    $(\"* [type]\").removeAttr(\"type\");\n}\nexport function validateStyle($){\n    let style = $('head').find('style:not([amp-boilerplate])');\n    let css = $(style).html();\n    let ampStyle = `<style amp-custom>${css}</style>`\n    $(style).replaceWith(ampStyle);\n}\nexport function removeExternalStyles($){\n    let fonts = styleRules.externalStylesheet.attrs.value;\n    $('link[rel=\"stylesheet\"]').each(function(index, element){\n        for(let value in fonts){\n            if($(this).attr(`[href=${fonts[value]}]`) !== undefined){\n                return true;\n            }\n        }\n        $(this).remove();   \n    });\n}\n\n"]}